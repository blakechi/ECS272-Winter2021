(this["webpackJsonpreact-d3"]=this["webpackJsonpreact-d3"]||[]).push([[0],{290:function(t,e,n){},294:function(t,e,n){},312:function(t,e,n){},317:function(t,e,n){},318:function(t,e,n){"use strict";n.r(e);var a=n(2),r=n(0),c=n.n(r),i=n(11),o=n.n(i),l=n(21),u=n(6),s=n(17),d=n(8),f=n(365),b=n(144),j=n.n(b),m=n(355),p=(n(290),n(372)),h=n(360),O=n(320),g=n(361),x=Object(m.a)({drawer:{width:"10%"}}),v=function(t){var e=t.anchor,n=t.drawerInfo,r=t.setDrawerInfo,c=t.toggleDrawer,i=x(),o=[{text:"Overview",onClick:function(){r(Object(u.a)(Object(u.a)({},n),{},{page:"Overview"}))}},{text:"Focus",onClick:function(){r(Object(u.a)(Object(u.a)({},n),{},{page:"Focus"}))}}];return Object(a.jsx)(p.a,{className:i.drawer,anchor:e,open:n[e],onClose:c(e,!1),children:Object(a.jsx)(h.a,{children:o.map((function(t){var e=t.text,n=t.onClick;return Object(a.jsx)(O.a,{button:!0,onClick:n,children:Object(a.jsx)(g.a,{primary:e})},e)}))})})},y=n(19),w=n.n(y),S=n(63),C=n(38),k=n(366),A=n(367),N=n(358),R=n(20),T=20,L=50,D=150,F=50,M=1200,I=800,z=24;function E(t){var e=t.data,n=t.xAxisName,i=t.fineSelect,o=t.topK,l=t.yearRange,u=Object(R.a)(t,["data","xAxisName","fineSelect","topK","yearRange"]),s=Object(r.useRef)(),f=u.width||M,b=u.height||I;return Object(r.useEffect)((function(){var t=B(e,{xAxisName:n,fineSelect:i,topK:o,yearRange:l}),a=f-F-L,r=b-T-D,c=d.q(s.current),u=c.transition().duration(1500),j=z,m=d.n().domain(t.map((function(t){return t[n]}))).rangeRound([F,F+j*t.length]),p=d.o().domain([0,d.k(t.map((function(t){return t.count})))]).rangeRound([T+r,T]);c.selectAll("rect").data(t,(function(t){return t})).join((function(t){return t.append("rect").style("mix-blend-mode","multiply").attr("fill","cornflowerblue").attr("opacity",".8").attr("x",a+L).attr("y",(function(t){return p(t.count)})).attr("width",m.bandwidth()-1).attr("height",(function(t){return p(0)-p(t.count)})).call((function(t){return t.transition(u).attr("x",(function(t){return m(t[n])}))}))}),(function(t){return t}),(function(t){return t.call((function(t){return t.transition(u).attr("fill","tomato").attr("width",0).attr("height",0).remove()}))})).on("mouseenter",(function(t,e){d.q(t.currentTarget).attr("opacity","1."),c.append("text").attr("id","tooltip").attr("x",m(e[n])+m.bandwidth()/2).attr("y",p(e.count)).attr("dy","-.35em").attr("font-size",20).text("".concat(n,": ")+e[n]+" / Count: "+e.count)})).on("mouseout mouseleave",(function(t){d.q(t.currentTarget).attr("opacity",".8"),c.select("#tooltip").remove()}));c.select("#x-axis-label").remove(),c.append("text").attr("id","x-axis-label").attr("transform","translate("+(a/2+F)+" ,"+(r+T+40)+")").attr("fill","#737373").attr("font-family","sans-serif").attr("font-size",25).attr("text-anchor","middle").text(n),c.select("#y-axis").remove(),c.append("g").attr("id","y-axis").call((function(t){return t.attr("transform","translate(".concat(F,",0)")).call(d.d(p)).select(".domain").remove()})).call((function(t){return t.select(".tick:last-of-type text").clone().attr("text-anchor","end").attr("font-size",25).attr("x",T).attr("y",-F-5).attr("transform","rotate(-90)").text("Row Count")}))}),[f,b,e,n,i,o,l]),Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("div",{children:"Bar Chart"}),Object(a.jsx)("svg",{viewBox:"0 0 ".concat(f," ").concat(b),preserveAspectRatio:"xMidYMid meet",children:Object(a.jsx)("g",{ref:s,transform:"translate(".concat(F,", ").concat(T,")")})})]})}var B=function(t,e){var n=e.xAxisName,a=e.fineSelect,r=e.topK,c=e.yearRange;return a.options.filter((function(t){return 0===a.value.length||a.value.includes(t)})).map((function(e){var a;return a={},Object(l.a)(a,n,e),Object(l.a)(a,"count",t.filter((function(t){return c[0]<=t["Release Year"]&&t["Release Year"]<=c[1]&&t[n]===e})).length),a})).sort((function(t,e){var n=t.count,a=e.count;return n<a?1:n>a?-1:0})).slice(0,r)},P=c.a.memo(E),K=n(375),Y=n(373),_=n(364),q=n(362),W=n(369),V=function(t){var e=t.name,n=t.label,r=t.value,c=t.options,i=t.onChange,o=t.disabled,l=void 0!==o&&o,u=(Object(R.a)(t,["name","label","value","options","onChange","disabled"]),Object(m.a)((function(t){return{xAxis:{width:"90%"},formControl:{margin:t.spacing(1),width:"100%",maxWidth:"".concat(window.innerWidth/6-64,"px")},label:{fontSize:19},select:{"& .MuiSelect-select":{marginTop:t.spacing(2)},"& .MuiSelect-icon":{marginTop:t.spacing(1)}}}}))());return Object(a.jsx)("div",{className:u.xAxis,children:Object(a.jsxs)(q.a,{className:u.formControl,children:[Object(a.jsx)(Y.a,{shrink:!0,className:u.label,id:"".concat(e,"-label"),children:n}),Object(a.jsxs)(W.a,{className:u.select,labelId:"".concat(e,"-label"),id:"".concat(e,"-placeholder-label"),value:r,onChange:i,disabled:l,displayEmpty:!0,autoWidth:!0,children:[Object(a.jsx)(_.a,{value:"",children:Object(a.jsx)("em",{children:"(No Value)"})}),c.map((function(t){return Object(a.jsx)(_.a,{value:t,children:t},t)}))]})]})})},U=n(72),G=n(374);function H(t){return""}function Z(t){var e=t.name,n=t.label,r=t.value,c=t.range,i=t.marks,o=t.onChange,l=(Object(R.a)(t,["name","label","value","range","marks","onChange"]),Object(m.a)((function(t){return{yearSlider:{margin:t.spacing(1)},label:{fontSize:14}}}))());return Object(a.jsxs)("div",{className:l.yearSlider,children:[Object(a.jsx)(U.a,{className:l.label,id:"".concat(e,"-range-slider"),gutterBottom:!0,children:n}),Object(a.jsx)(G.a,{defaultValue:r,value:r,marks:i,step:null,min:c[0],max:c[1],onChange:o,valueLabelDisplay:"auto","aria-labelledby":"".concat(e,"-range-slider"),getAriaValueText:H})]},e)}var J=n(363),Q=n(371);function X(t){var e=t.name,n=t.label,r=t.value,c=t.options,i=t.disabled,o=t.onChange,l=Object(R.a)(t,["name","label","value","options","disabled","onChange"]),u=Object(m.a)((function(t){return{fineSelect:{width:"90%"},formControl:{margin:t.spacing(1),width:"100%",maxWidth:"".concat(window.innerWidth/6-64,"px")},label:{fontSize:19},select:{"& .MuiSelect-select":{marginTop:t.spacing(2)},"& .MuiSelect-icon":{marginTop:t.spacing(1)}}}})),s={PaperProps:{style:{maxHeight:224,width:l.width}}},d=u();return Object(a.jsx)("div",{className:d.fineSelect,children:Object(a.jsxs)(q.a,{className:d.formControl,children:[Object(a.jsx)(Y.a,{shrink:!0,className:d.label,id:"".concat(e,"-multiple-chip-label"),children:n}),Object(a.jsx)(W.a,{className:d.select,labelId:"".concat(e,"-multiple-chip-label"),id:"".concat(e,"-multiple-chip"),value:r,input:Object(a.jsx)(J.a,{}),disabled:i,onChange:o,displayEmpty:!0,multiple:!0,renderValue:function(t){return t.join(", ")},MenuProps:s,autoWidth:!0,children:c.map((function(t,e){return Object(a.jsxs)(_.a,{value:t,disabled:!!l.disabledOptions&&l.disabledOptions[e],children:[Object(a.jsx)(Q.a,{checked:r.indexOf(t)>-1}),Object(a.jsx)(g.a,{primary:t})]},t)}))})]})})}function $(t){return"".concat(t)}function tt(t){var e=t.name,n=t.label,r=t.value,c=t.range,i=t.marks,o=t.disabled,l=t.onChange,u=(Object(R.a)(t,["name","label","value","range","marks","disabled","onChange"]),Object(m.a)((function(t){return{topK:{margin:t.spacing(1)},label:{fontSize:14}}}))());return Object(a.jsxs)("div",{className:u.topK,children:[Object(a.jsx)(U.a,{className:u.label,id:"".concat(e,"-discrete-slider"),gutterBottom:!0,children:n}),Object(a.jsx)(G.a,{defaultValue:r,value:r,getAriaValueText:$,"aria-labelledby":"".concat(e,"-discrete-slider"),valueLabelDisplay:"auto",marks:i,step:1,min:c[0],max:c[1],disabled:o,onChange:l})]},e)}var et=Object(K.a)()((function(t){var e=t.name,n=t.xAxis,r=t.fineSelect,c=t.topK,i=t.yearSlider;return Object(R.a)(t,["name","xAxis","fineSelect","topK","yearSlider"]),Object(a.jsxs)("div",{id:e,children:[Object(a.jsx)("div",{className:"panel-title",children:"Global Control"}),Object(a.jsx)(V,Object(u.a)({},n)),Object(a.jsx)(X,Object(u.a)({},r)),Object(a.jsx)(tt,Object(u.a)({},c)),Object(a.jsx)(Z,Object(u.a)({},i))]})})),nt=n(13),at=(n(294),function(t){var e="",n=0;for(var a in t){var r=t[a];e+=0===n?r:" "+a+": "+r,n++}return e}),rt=function(t){var e=t.id,n=t.title,i=t.category,o=t.data,l=t.margin,u=t.padAngle,s=t.cornerRadius,f=Object(R.a)(t,["id","title","category","data","margin","padAngle","cornerRadius"]),b=Object(r.useRef)();return Object(r.useEffect)((function(){var t=o.length,n=d.p().domain(o.map((function(t,e){return e}))).range(o.map((function(e,n){return d.i(n/t)}))),a=Math.min(90,90)/2,r=d.q(b.current),c=d.l().value((function(t){return t.count})).sort(null),l=d.a().outerRadius(.8*a).innerRadius(.6*a).cornerRadius(s).padAngle(u);r.select(".".concat(e,"-slice")).selectAll("path").data(c(o)).enter().append("path").attr("d",l).attr("fill",(function(t){return n(t.data[i])})).attr("opacity",".6").attr("transform","translate(".concat(a,", ").concat(a,")")).on("mouseover",(function(t,e){d.q(t.currentTarget).transition().duration(50).attr("opacity","1."),r.append("circle").attr("class","tooltip-circle").attr("r",.55*a).attr("fill",n(e.data[i])).attr("opacity",1).attr("transform","translate(".concat(a,", ").concat(a,")")),r.append("text").attr("class","tooltip-text").attr("transform","translate(".concat(a,", ").concat(a,")")).attr("dy",-10).html(at(e.data)).style("font-size","0.4em").style("text-anchor","middle")})).on("mouseout",(function(t){d.q(t.currentTarget).attr("opacity",".6"),d.r(".tooltip-circle").remove(),d.r(".tooltip-text").remove()}))}),[e,o,i,u,s,f]),Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("svg",{id:e,viewBox:"0 0 ".concat(90," ").concat(90),children:Object(a.jsx)("g",{ref:b,transform:"translate(".concat(l.left,", ").concat(l.top,")"),children:Object(a.jsx)("g",{className:"".concat(e,"-slice")})})}),Object(a.jsx)("div",{className:"donut-title",children:n})]})},ct={top:0,right:0,bottom:0,left:0},it=Object(K.a)()((function(t){var e=t.data,n=t.constraints,r=(Object(R.a)(t,["data","constraints"]),n.xAxisName),i=n.yearRange,o=n.target,u=n.selections,s=e.filter((function(t){return i[0]<=t["Release Year"]&&t["Release Year"]<=i[1]&&t[r]===o})),d=u.map((function(t){var e,n={},a=Object(nt.a)(s);try{for(a.s();!(e=a.n()).done;){var r=e.value;n[r[t]]=1+(n[r[t]]||0)}}catch(c){a.e(c)}finally{a.f()}return Object.keys(n).map((function(e){var a;return a={},Object(l.a)(a,t,e),Object(l.a)(a,"count",n[e]),a}))}));return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("div",{children:"Donuts"}),Object(a.jsx)("div",{children:""===o?"":u.map((function(t,e){return Object(a.jsx)(rt,{id:"donut-".concat(e),title:t,category:t,data:d[e],margin:ct,padAngle:.015,cornerRadius:3},t)}))})]})}));var ot=Object(K.a)()((function(t){var e=t.name,n=t.donutsTarget,r=t.donutsSelect;return Object(a.jsxs)("div",{id:e,children:[Object(a.jsx)("div",{children:"Donut Control"}),Object(a.jsx)(V,Object(u.a)({},n)),Object(a.jsx)(X,Object(u.a)({},r))]})})),lt=n(70),ut=n(71),st=n(146),dt=n(145),ft=n(147),bt=n(138);function jt(){var t=Object(bt.a)(["\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 18px;\n    height: 18px;\n    border: 2px solid #fff;\n    border-radius: 100%;\n    user-select: none;\n    transform: translate(-50%, -50%);\n    cursor: ",";\n    &:hover {\n        z-index: 1;\n    }\n"]);return jt=function(){return t},t}var mt=n(139).a.div(jt(),(function(t){return t.onClick?"pointer":"default"})),pt=function(t){var e=t.text,n=t.color,r=t.onClick;return Object(a.jsx)(mt,{alt:e,onClick:r,style:{backgroundColor:n}})};pt.defaultProps={onClick:null};var ht=pt,Ot=function(t){Object(st.a)(n,t);var e=Object(dt.a)(n);function n(){var t;Object(lt.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={colorScale30:d.p().domain(d.m(15)).range(d.m(15).map((function(t,e){return d.i(e/15)})))},t.getMarkerData=function(e,n){var a=t.state.colorScale30,r=n.xAxisName,c=n.fineSelectValue,i=[];if(0!==c.length){i=e.filter((function(t){return c.includes(t[r])})).map((function(t){return{target:t[r],address:t.Locations,latitude:t.Latitude,longitude:t.Longitude}}));var o=Object(C.a)(new Set(i.map((function(t){return t.target}))));i=i.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{color:a(o.indexOf(t.target))})}))}return i},t}return Object(ut.a)(n,[{key:"render",value:function(){var t=this.props,e=t.data,n=t.constraints,r=t.center,i=t.zoom,o=this.getMarkerData(e,n);return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)("div",{children:"Map"}),Object(a.jsx)("div",{style:{height:"100%",width:"100%"},children:Object(a.jsx)(ft.a,{bootstrapURLKeys:{key:"AIzaSyALnnQIgYfZ4UyhBXfRUtTwmbnfoqBcTxA"},defaultCenter:r,defaultZoom:i,yesIWantToUseGoogleMapApiInternals:!0,children:o.map((function(t,e){return Object(a.jsx)(ht,{text:t.address,lat:t.latitude,lng:t.longitude,color:t.color},e)}))})})]})}}]),n}(r.Component);Ot.defaultProps={center:{lat:37.7694208,lng:-122.4262138},zoom:11};var gt=Ot,xt=n(143),vt=n.n(xt),yt=function(){var t=Object(S.a)(w.a.mark((function t(e){var n,a=arguments;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,t.next=3,new Promise((function(t){setTimeout(t,250*n)}));case 3:return t.next=5,vt.a.get("https://maps.googleapis.com/maps/api/geocode/json",{params:{address:e,key:"AIzaSyALnnQIgYfZ4UyhBXfRUtTwmbnfoqBcTxA"}});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),wt=Object(m.a)((function(t){return{progress:{},root:{flexGrow:1,marginTop:"16px"},item:{display:"flex"},paper:{padding:t.spacing(2),marginBottom:t.spacing(2),color:t.palette.text.secondary,width:"100%",justifyContent:"space-between",flexDirection:"row"}}})),St=function(t){var e=t.data,n=t.setData,i=t.visible,o=Object(r.useState)({name:"x-axis",label:"Columns",value:"",options:[]}),l=Object(s.a)(o,2),d=l[0],f=l[1],b=Object(r.useState)({name:"fine-select",label:"Rows",value:[],options:[],disabled:!0}),j=Object(s.a)(b,2),m=j[0],p=j[1],h=Object(r.useState)({name:"top-k",label:"Top K",value:50,range:[1,50],marks:[{value:1,label:"1"},{value:50,label:"50"}],disabled:!1}),O=Object(s.a)(h,2),g=O[0],x=O[1],v=Object(r.useState)({name:"year",label:"Year",value:[],range:[],marks:[]}),y=Object(s.a)(v,2),R=y[0],T=y[1],L=Object(r.useState)({name:"donuts-target-selector",label:"Target for Donuts",value:"",options:[],disabled:!0}),D=Object(s.a)(L,2),F=D[0],M=D[1],I=Object(r.useState)({name:"donuts-muti-selector",label:"Donut Topic",value:[],options:[],disabled:!0,optionsDisable:[]}),z=Object(s.a)(I,2),E=z[0],B=z[1],K=Object(r.useState)(!1),Y=Object(s.a)(K,2),_=Y[0],q=Y[1];Object(r.useEffect)((function(){var t=Object(C.a)(new Set(e.map((function(t){return t["Release Year"]})))).sort(),n=[Math.min.apply(null,t),Math.max.apply(null,t)],a=Object.keys(e[0]).slice(0,-3);f((function(t){return Object(u.a)(Object(u.a)({},t),{},{options:a})})),T((function(e){return Object(u.a)(Object(u.a)({},e),{},{value:n,range:n,marks:t.map((function(t){return{value:t,label:null}}))})})),B((function(t){return Object(u.a)(Object(u.a)({},t),{},{options:a,disabledOptions:a.map((function(t){return!1}))})}))}),[e]);var W=function(){var t=Object(S.a)(w.a.mark((function t(e){var a,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.target.value,t.next=3,G(a);case 3:r=t.sent,n(r),p((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:a})})),M((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:"",options:0===a.length?m.options:a})}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),V=function(t){var e=U(R.value).map((function(e){return e[t]}));return Object(C.a)(new Set(e)).sort()},U=function(t){return e.filter((function(e){return t[0]<=e["Release Year"]&&e["Release Year"]<=t[1]}))},G=function(){var t=Object(S.a)(w.a.mark((function t(n){var a,r;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return q(!0),a=e.filter((function(t){return n.includes(t[d.value])&&(null===t.Longitude||null===t.Latitude)})),r=a.map((function(t,e){return yt(t.Locations,e)})),t.abrupt("return",Promise.all(r).then((function(t){return t.map((function(t,e){var n=t.data;return 0!==n.results.length?n.results[0].geometry.location:{lat:void 0,lng:void 0}}))})).then((function(t){var n=Object(C.a)(e);return t.forEach((function(t,e){try{n[a[e].id]=Object(u.a)(Object(u.a)({},n[a[e].id]),{},{Latitude:t.lat,Longitude:t.lng})}catch(r){console.log(r)}})),q(!1),n})).catch((function(t){return console.log(t),e})));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=wt();return i?Object(a.jsxs)(c.a.Fragment,{children:[_?Object(a.jsx)(k.a,{className:H.progress}):Object(a.jsx)(k.a,{variant:"determinate",value:0}),Object(a.jsxs)("div",{className:H.root,id:"details-page",children:[Object(a.jsxs)(A.a,{container:!0,spacing:2,alignItems:"stretch",children:[Object(a.jsxs)(A.a,{className:H.item,container:!0,item:!0,xs:2,direction:"row",children:[Object(a.jsx)(N.a,{className:H.paper,children:Object(a.jsx)(et,{name:"global-control-panel",xAxis:Object(u.a)(Object(u.a)({},d),{},{onChange:function(t){var e=t.target.value;f((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:e})}));var n=V(e);p((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:[],options:""===e?[]:n,disabled:""===e})})),M((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:"",options:""===e?[]:n,disabled:""===e})}));var a=E.options.map((function(t){return t===e}));a[d.options.indexOf(e)]=!0,B((function(t){return Object(u.a)(Object(u.a)({},t),{},{disabledOptions:a})}))}}),fineSelect:Object(u.a)(Object(u.a)({},m),{},{onChange:W}),topK:Object(u.a)(Object(u.a)({},g),{},{onChange:function(t,e){x((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:e})}))}}),yearSlider:Object(u.a)(Object(u.a)({},R),{},{onChange:function(t,e){T((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:e})}))}})})}),Object(a.jsx)(N.a,{className:H.paper,children:Object(a.jsx)(ot,{name:"donut-control-panel",donutsTarget:Object(u.a)(Object(u.a)({},F),{},{onChange:function(t){var e=t.target.value;M((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:e})})),B((function(t){return Object(u.a)(Object(u.a)({},t),{},{disabled:""===e})}))}}),donutsSelect:Object(u.a)(Object(u.a)({},E),{},{onChange:function(t){var e=t.target.value;B((function(t){return Object(u.a)(Object(u.a)({},t),{},{value:e})}))}})})})]}),Object(a.jsx)(A.a,{className:H.item,item:!0,xs:8,children:Object(a.jsx)(N.a,{className:H.paper,children:Object(a.jsx)(P,{data:e,xAxisName:d.value,fineSelect:m,topK:g.value,yearRange:R.value})})}),Object(a.jsx)(A.a,{className:H.item,item:!0,xs:2,children:Object(a.jsx)(N.a,{className:H.paper,children:Object(a.jsx)(it,{data:e,constraints:{xAxisName:d.value,yearRange:R.value,target:F.value,selections:E.value}})})})]}),Object(a.jsx)(A.a,{container:!0,children:Object(a.jsx)(A.a,{className:H.item,item:!0,xs:12,children:Object(a.jsx)(N.a,{className:H.paper,style:{height:"500px"},children:Object(a.jsx)(gt,{data:e,constraints:{xAxisName:d.value,fineSelectValue:m.value}})})})})]})]}):null},Ct=(n(312),function t(e){return"".concat(e.parent?t(e.parent)+".":"").concat(e.data.name)}),kt=function(t){var e,n=new Map(t.leaves().map((function(t){return[Ct(t),t]}))),a=Object(nt.a)(t.leaves());try{var r=function(){var t=e.value;t.incoming=[],t.outgoing=t.data.imports.map((function(e){return[t,n.get(e)]}))};for(a.s();!(e=a.n()).done;)r()}catch(d){a.e(d)}finally{a.f()}var c,i=Object(nt.a)(t.leaves());try{for(i.s();!(c=i.n()).done;){var o,l=c.value,u=Object(nt.a)(l.outgoing);try{for(u.s();!(o=u.n()).done;){var s=o.value;s[1].incoming.push(s)}}catch(d){u.e(d)}finally{u.f()}}}catch(d){i.e(d)}finally{i.f()}return t},At=function(t,e,n,a){return e.map((function(e){if("Others"===e.name)return{name:e.name,size:e.count,imports:[]};var r=t.filter((function(t){return t[n.name]===e.name})).map((function(t){var e=[];return a.forEach((function(n){n.list.includes(t[n.name])?e.push(n.prefix.concat(t[n.name])):e.push(n.prefix.concat("Others"))})),e}));return r=r.reduce((function(t,e){return t.concat(e)}),[]),r=Object(C.a)(new Set(r)),{name:e.name,size:e.count,imports:r}}))},Nt=function(t,e,n,a){var r={name:"Title",prefix:"SF_Films.Title.",list:e.map((function(t){return t.name}))},c={name:"Locations",prefix:"SF_Films.Locations.",list:n.map((function(t){return t.name}))},i={name:"Director",prefix:"SF_Films.Director.",list:a.map((function(t){return t.name}))};return{name:"SF_Films",children:[{name:"Title",children:At(t,e,r,[c,i])},{name:"Locations",children:At(t,n,c,[r,i])},{name:"Director",children:At(t,a,i,[c,r])}]}},Rt=function(t,e){for(var n=t.map((function(t){return t[e]})),a={},r=0;r<n.length;r++)a[n[r]]=1+(a[n[r]]||0);var c=Object.entries(a).map((function(t){return{name:t[0],count:t[1]}})),i={name:"Others",count:(c=c.sort((function(t,e){var n=t.count,a=e.count;return n<a?1:n>a?-1:0}))).slice(59).reduce((function(t,e){return t+e.count}),0)};return(c=c.slice(0,59)).push(i),c},Tt=function(t){var e=t.data,n=Object(r.useRef)(),c=window.innerHeight,i=window.innerHeight,o=i/2.5,l=6*c/12;return Object(r.useEffect)((function(){var t={Title:"#5DE645",Locations:"#E6A42E",Director:"#1777E6"},a=d.e().size([2*Math.PI,o-100]),r=d.j().curve(d.g.beta(.85)).radius((function(t){return t.y})).angle((function(t){return t.x})),c=Rt(e,"Title"),i=Rt(e,"Locations"),l=Rt(e,"Director"),u=Nt(e,c,i,l),f=a(kt(d.h(u).sort((function(t,e){return d.b(t.height,e.height)||d.b(t.data.name,e.data.name)})))),b=d.q(n.current);b.append("g").attr("font-family","sans-serif").attr("font-size",8).selectAll("g").data(f.leaves()).join("g").attr("transform",(function(t){return"rotate(".concat(180*t.x/Math.PI-90,") translate(").concat(t.y,",0)")})).append("text").attr("dy","0.31em").attr("x",(function(t){return t.x<Math.PI?6:-6})).attr("fill",(function(e){return t[e.parent.data.name]})).attr("text-anchor",(function(t){return t.x<Math.PI?"start":"end"})).attr("transform",(function(t){return t.x>=Math.PI?"rotate(180)":null})).text((function(t){var e=t.data.name.replaceAll("_"," ");return e.length<=20?e:e.slice(0,20).concat("...")})).each((function(t){t.text=this})).on("mouseover",(function(e,n){j.style("mix-blend-mode",null),d.q(this).attr("font-weight","bold"),d.r(n.incoming.map((function(t){return t.path}))).attr("stroke","#00f").raise(),d.r(n.incoming.map((function(t){return Object(s.a)(t,1)[0].text}))).attr("fill",(function(e){return t[e.parent.data.name]})).attr("font-weight","bold"),d.r(n.outgoing.map((function(t){return t.path}))).attr("stroke","#f00").raise(),d.r(n.outgoing.map((function(t){return Object(s.a)(t,2)[1].text}))).attr("fill",(function(e){return t[e.parent.data.name]})).attr("font-weight","bold")})).on("mouseout",(function(e,n){j.style("mix-blend-mode","multiply"),d.q(this).attr("font-weight",null),d.r(n.incoming.map((function(t){return t.path}))).attr("stroke",null),d.r(n.incoming.map((function(t){return Object(s.a)(t,1)[0].text}))).attr("fill",(function(e){return t[e.parent.data.name]})).attr("font-weight",null),d.r(n.outgoing.map((function(t){return t.path}))).attr("stroke",null),d.r(n.outgoing.map((function(t){return Object(s.a)(t,2)[1].text}))).attr("fill",(function(e){return t[e.parent.data.name]})).attr("font-weight",null)})).call((function(t){return t.append("title").text((function(t){return"".concat(Ct(t).replaceAll("."," / "),"\n        ").concat(t.outgoing.length," outgoing\n        ").concat(t.incoming.length," incoming")}))}));var j=b.append("g").attr("stroke","#ccc").attr("stroke-width",(function(t){return"0.075%"})).attr("fill","none").selectAll("path").data(f.leaves().flatMap((function(t){return t.outgoing}))).join("path").style("mix-blend-mode","multiply").attr("d",(function(t){var e=Object(s.a)(t,2),n=e[0],a=e[1];return r(n.path(a))})).each((function(t){t.path=this}))}),[e,o]),Object(a.jsx)("div",{className:"chord",children:Object(a.jsx)("svg",{className:"d3-chord",id:Ct,viewBox:"0 0 ".concat(c," ").concat(i),children:Object(a.jsx)("g",{ref:n,transform:"translate(".concat(l,", ").concat(o,")")})})})},Lt=function(t){var e=t.data;return t.visible?Object(a.jsx)("div",{id:"overview-page",children:Object(a.jsx)(Tt,{data:e})}):null},Dt=Object(m.a)((function(t){return{titleContainer:{margin:0,padding:0,boxSizing:"border-box"},title:{height:"50px",backgroundColor:"#5D10A8",color:"white",paddingLeft:"10px",paddingTop:"5px",fontWeight:"lighter",fontFamily:"Roboto"},iconBtn:{position:"absolute",right:"10px"},icon:{color:"white"}}}));function Ft(t){var e=Object(r.useState)(!0),n=Object(s.a)(e,2),c=n[0],i=n[1],o=Object(r.useState)([]),b=Object(s.a)(o,2),m=b[0],p=b[1],h=Object(r.useState)({right:!1,page:"Overview"}),O=Object(s.a)(h,2),g=O[0],x=O[1];Object(r.useEffect)((function(){Object(d.f)("/ECS272-Winter2021/dataset/Film_Locations_in_San_Francisco.csv").then((function(t){return(t=t.filter((function(t){return""!==t.Locations}))).forEach((function(e,n){t[n]["Release Year"]=+e["Release Year"],t[n].Title=e.Title.replaceAll(" ","_").replaceAll([",",".","\\",'"'],""),t[n].Locations=e.Locations.replaceAll(" ","_").replaceAll([",",".","\\",'"'],""),t[n].Director=e.Director.replaceAll(" ","_").replaceAll([",",".","\\",'"'],""),delete e["Fun Facts"]})),t.map((function(t,e){return Object(u.a)(Object(u.a)({},t),{},{id:e,Latitude:null,Longitude:null})}))})).then((function(t){p(t)})).then((function(){i(!1)}))}),[]);var y=function(t,e){return function(n){(!n||"keydown"!==n.type||"Tab"!==n.key&&"Shift"!==n.key)&&x(Object(u.a)(Object(u.a)({},g),{},Object(l.a)({},t,e)))}},w=function(t){return g.page===t},S=Dt();return c?Object(a.jsx)("h1",{children:"Load Data..."}):Object(a.jsxs)("div",{children:[Object(a.jsx)(f.a,{className:S.iconBtn,onClick:y("right",!0),onKeyDown:y("right",!1),children:Object(a.jsx)(j.a,{className:S.icon})}),Object(a.jsx)("h1",{className:S.title,children:"Film Locations in San Francisco"}),Object(a.jsx)(v,{anchor:"right",drawerInfo:g,setDrawerInfo:x,toggleDrawer:y}),Object(a.jsxs)("div",{className:S.root,children:[Object(a.jsx)(Lt,{data:m,visible:w("Overview")}),Object(a.jsx)(St,{data:m,setData:p,visible:w("Focus")})]})]})}var Mt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,377)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),a(t),r(t),c(t),i(t)}))},It=n(368);n(317);o.a.render(Object(a.jsxs)(c.a.StrictMode,{children:[Object(a.jsx)(It.a,{}),Object(a.jsx)(Ft,{})]}),document.getElementById("root")),Mt()}},[[318,1,2]]]);
//# sourceMappingURL=main.8b5b81fa.chunk.js.map